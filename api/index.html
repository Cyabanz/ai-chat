<!DOCTYPE html>
<html>
  <head>
    <title>Chatbot</title>
    <style>
      #chat-output div { margin: 4px 0; }
    </style>
  </head>
  <body>
    <form id="chat-form" autocomplete="off">
      <input type="text" id="user-input" placeholder="Say something..." />
      <button type="submit">Send</button>
    </form>
    <div id="chat-output"></div>
    <script>
      document.getElementById('chat-form').addEventListener('submit', async function(event) {
        event.preventDefault();
        const input = document.getElementById('user-input');
        const messageText = input.value;
        if (!messageText) return;
        const chatOutput = document.getElementById('chat-output');
        chatOutput.innerHTML += `<div><b>You:</b> ${messageText}</div>`;
        const response = await fetch('/api/openrouter', {
          method: 'POST',
          headers: {'Content-Type': 'application/json'},
          body: JSON.stringify({
            history: [{ role: "user", text: messageText }]
          })
        });
        const data = await response.json();
        chatOutput.innerHTML += `<div><b>Bot:</b> ${data.text}</div>`;
        input.value = '';
      });
    </script>
  </body>
</html>
